!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RUNNING=Symbol("running"),t.SUCCESS=!0,t.FAILURE=!1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3);function a(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.config,n=void 0===r?{}:r,o=a(e,["config"]);c(this,t);var u=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o));return u.nodeType="Decorator",u.setConfig(n),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"decorate",value:function(e){return e()}},{key:"run",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.runData,u=r.registryLookUp,i=void 0===u?function(e){return e}:u,c=a(r,["runData","registryLookUp"]),f=n?[]:null,l=this.decorate((function(){return i(t.blueprint.node).run(e,o({},c,{registryLookUp:i,runData:f}))}),e,this.config);return n&&n.push({config:this.config,name:this.name,type:this.nodeType,nodes:f,result:l}),l}},{key:"setConfig",value:function(e){this.config=e}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.getRegistry=function(){return f},t.registryLookUp=l;var u,i=r(0),a=r(5),c=(u=a)&&u.__esModule?u:{default:u};var f={};function l(e){if("string"==typeof e){var t=f[e];if(!t)throw new Error("No node with name "+e+" registered.");return t}return e}var s=function(){function e(t){var r=t.tree,n=t.blackboard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tree=r,this.blackboard=n,this.lastResult=null}return o(e,[{key:"step",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debug,r=void 0!==t&&t,o=this.lastResult&&"object"===n(this.lastResult)?this.lastResult:[],u=this.lastResult===i.RUNNING||o.length>0,a=r?[]:null;this.lastResult=l(this.tree).run(this.blackboard,{indexes:o,rerun:u,registryLookUp:l,runData:a}),this.lastRunData=a}}],[{key:"register",value:function(e,t){f[e]="function"==typeof t?new c.default({name:e,run:t}):t}},{key:"cleanRegistry",value:function(){f={}}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0);function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var a=function(){},c=function(){function e(t){var r=t.run,o=void 0===r?a:r,u=t.start,c=void 0===u?a:u,f=t.end,l=void 0===f?a:f,s=i(t,["run","start","end"]);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeType="Node",this.blueprint=n({run:o,start:c,end:l},s)}return o(e,[{key:"run",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.rerun,o=void 0!==r&&r,a=t.runData,c=t.registryLookUp,f=void 0===c?function(e){return e}:c,l=i(t,["rerun","runData","registryLookUp"]);o||this.blueprint.start(e);var s=this.blueprint.run(e,n({},l,{rerun:o,runData:a,registryLookUp:f}));return s!==u.RUNNING&&this.blueprint.end(e),a&&a.push({name:this.name,type:this.nodeType,result:s}),s}},{key:"collectData",value:function(){return{name:this.name,type:this.nodeType}}},{key:"name",get:function(){return this._name||this.blueprint.name},set:function(e){this._name=e}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),a=r(3);function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.nodeType="BranchNode",r.numNodes=e.nodes.length,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.indexes,n=void 0===r?[]:r,u=t.rerun,a=t.runData,f=t.registryLookUp,l=void 0===f?function(e){return e}:f,s=a?[]:null;this.blueprint.start(e);for(var p=this.START_CASE,y=n.shift()||0;y<this.numNodes;){var d=l(this.blueprint.nodes[y]),b=d.run(e,{indexes:n,rerun:u,runData:s,registryLookUp:l});if(b===i.RUNNING)return[y].concat(c(n));if("object"===(void 0===b?"undefined":o(b)))return[].concat(c(n),[y],c(b));if(b===this.OPT_OUT_CASE){p=b;break}++y}if(this.blueprint.end(e),a){for(++y;y<this.numNodes;)s.push(l(this.blueprint.nodes[y]).collectData()),++y;a.push({name:this.name,type:this.nodeType,nodes:s,result:p})}return p}},{key:"collectData",get:function(){return{name:this.name,type:this.nodeType,nodes:this.nodes.map((function(e){return e.collectData()}))}}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(3);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){var e,r,n;u(this,t);for(var o=arguments.length,a=Array(o),c=0;c<o;c++)a[c]=arguments[c];return r=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n.nodeType="Task",i(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),a=r(4);function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,r,n;f(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return r=n=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.nodeType="Random",l(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.indexes,n=void 0===r?[]:r,u=t.rerun,a=t.registryLookUp,f=void 0===a?function(e){return e}:a;this.blueprint.start(e);var l=n.shift()||0;u||(l=Math.floor(Math.random()*this.numNodes));var s=f(this.blueprint.nodes[l]),p=s.run(e,{indexes:n,rerun:u,registryLookUp:f});return p===i.RUNNING?[l].concat(c(n)):"object"===(void 0===p?"undefined":o(p))?[].concat(c(n),[l],c(p)):(this.blueprint.end(e),p)}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(0),u=r(4);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,r,n;i(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.nodeType="Selector",n.START_CASE=o.FAILURE,n.OPT_OUT_CASE=o.SUCCESS,a(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=u)&&n.__esModule?n:{default:n}).default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(0),u=r(4);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,r,n;i(this,t);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.nodeType="Sequence",n.START_CASE=o.SUCCESS,n.OPT_OUT_CASE=o.FAILURE,a(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=u)&&n.__esModule?n:{default:n}).default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),i=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,r,n;a(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return r=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.nodeType="AlwaysFailDecorator",c(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"decorate",value:function(e){return e()===u.RUNNING?u.RUNNING:u.FAILURE}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),i=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,r,n;a(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return r=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.nodeType="AlwaysSucceedDecorator",c(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"decorate",value:function(e){return e()===u.RUNNING?u.RUNNING:u.SUCCESS}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),i=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,r,n;a(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return r=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.nodeType="CooldownDecorator",c(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"setConfig",value:function(e){var t=e.cooldown,r=void 0===t?5:t;this.config={cooldown:r}}},{key:"decorate",value:function(e){var t=this;return this.lock?u.FAILURE:(this.lock=!0,setTimeout((function(){t.lock=!1}),1e3*this.config.cooldown),e())}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),i=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,r,n;a(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return r=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.nodeType="InvertDecorator",c(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"decorate",value:function(e){var t=e();return t===u.RUNNING?u.RUNNING:t===u.SUCCESS?u.FAILURE:u.SUCCESS}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(0),i=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){var e,r,n;a(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return r=n=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),n.nodeType="LoopDecorator",c(n,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"setConfig",value:function(e){var t=e.loop,r=void 0===t?1/0:t;this.config={loop:r}}},{key:"decorate",value:function(e){for(var t=0,r=u.FAILURE;t++<this.config.loop;)if((r=e())===u.FAILURE)return u.FAILURE;return r}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=f},function(e,t,r){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(2).default;e.exports=n({BehaviorTree:o,getRegistry:r(2).getRegistry,registryLookUp:r(2).registryLookUp,BehaviorTreeImporter:r(15).default,BranchNode:r(4).default,Node:r(3).default,Selector:r(7).default,Sequence:r(8).default,Random:r(6).default,Decorator:r(1).default,Task:r(5).default,decorators:n({},r(16))},r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=b(r(1)),u=b(r(6)),i=b(r(7)),a=b(r(8)),c=b(r(5)),f=b(r(9)),l=b(r(10)),s=b(r(11)),p=b(r(12)),y=b(r(13)),d=r(2);function b(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types={task:c.default,decorator:o.default,selector:i.default,sequence:a.default,random:u.default,invert:p.default,fail:f.default,succeed:l.default,cooldown:s.default,loop:y.default}}return n(e,[{key:"defineType",value:function(e,t){this.types[e]=t}},{key:"parse",value:function(e){var t=this,r=e.type,n=e.name,o=e.node,u=e.nodes,i=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["type","name","node","nodes"]),a=this.types[r];if(!a){var c=(0,d.registryLookUp)(r);if(c)return c.name=n,c;throw new Error("Don't know how to handle type "+r+". Please register this first.")}return new a({name:n,node:o?this.parse(o):null,nodes:u?u.map((function(e){return t.parse(e)})):null,config:i})}}]),e}();t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoopDecorator=t.InvertDecorator=t.CooldownDecorator=t.AlwaysSucceedDecorator=t.AlwaysFailDecorator=void 0;var n=c(r(9)),o=c(r(10)),u=c(r(11)),i=c(r(12)),a=c(r(13));function c(e){return e&&e.__esModule?e:{default:e}}t.AlwaysFailDecorator=n.default,t.AlwaysSucceedDecorator=o.default,t.CooldownDecorator=u.default,t.InvertDecorator=i.default,t.LoopDecorator=a.default}]));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvRGVjb3JhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9CZWhhdmlvclRyZWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL05vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0JyYW5jaE5vZGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Rhc2suanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JhbmRvbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvU2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1NlcXVlbmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9kZWNvcmF0b3JzL0Fsd2F5c0ZhaWxEZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlY29yYXRvcnMvQWx3YXlzU3VjY2VlZERlY29yYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGVjb3JhdG9ycy9Db29sZG93bkRlY29yYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGVjb3JhdG9ycy9JbnZlcnREZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlY29yYXRvcnMvTG9vcERlY29yYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgubm9kZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvQmVoYXZpb3JUcmVlSW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlY29yYXRvcnMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJSVU5OSU5HIiwiU1VDQ0VTUyIsIkZBSUxVUkUiLCJEZWNvcmF0b3IiLCJjb25maWciLCJwcm9wcyIsIm5vZGVUeXBlIiwic2V0Q29uZmlnIiwicnVuIiwiYmxhY2tib2FyZCIsInJ1bkRhdGEiLCJyZWdpc3RyeUxvb2tVcCIsIngiLCJzdWJSdW5EYXRhIiwicmVzdWx0IiwidGhpcyIsImRlY29yYXRlIiwiYmx1ZXByaW50Iiwibm9kZSIsInB1c2giLCJ0eXBlIiwibm9kZXMiLCJOb2RlIiwiZ2V0UmVnaXN0cnkiLCJyZWdpc3RyeSIsImxvb2tlZFVwTm9kZSIsIkVycm9yIiwiQmVoYXZpb3JUcmVlIiwidHJlZSIsImxhc3RSZXN1bHQiLCJkZWJ1ZyIsImluZGV4ZXMiLCJyZXJ1biIsImxlbmd0aCIsImxhc3RSdW5EYXRhIiwiVGFzayIsIk5PT1AiLCJzdGFydCIsImVuZCIsIl9uYW1lIiwiQnJhbmNoTm9kZSIsIm51bU5vZGVzIiwib3ZlcmFsbFJlc3VsdCIsIlNUQVJUX0NBU0UiLCJjdXJyZW50SW5kZXgiLCJzaGlmdCIsIk9QVF9PVVRfQ0FTRSIsImNvbGxlY3REYXRhIiwibWFwIiwiUmFuZG9tIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiU2VsZWN0b3IiLCJTZXF1ZW5jZSIsIkFsd2F5c0ZhaWxEZWNvcmF0b3IiLCJBbHdheXNTdWNjZWVkRGVjb3JhdG9yIiwiQ29vbGRvd25EZWNvcmF0b3IiLCJjb29sZG93biIsImxvY2siLCJzZXRUaW1lb3V0IiwiSW52ZXJ0RGVjb3JhdG9yIiwiTG9vcERlY29yYXRvciIsImxvb3AiLCJJbmZpbml0eSIsInJlcXVpcmUiLCJkZWZhdWx0IiwiQmVoYXZpb3JUcmVlSW1wb3J0ZXIiLCJkZWNvcmF0b3JzIiwidHlwZXMiLCJ0YXNrIiwiZGVjb3JhdG9yIiwic2VsZWN0b3IiLCJzZXF1ZW5jZSIsImludmVydCIsImZhaWwiLCJzdWNjZWVkIiwiS2xhc3MiLCJqc29uIiwicmVnaXN0ZXJlZE5vZGUiLCJwYXJzZSIsInN1Ykpzb24iXSwibWFwcGluZ3MiOiI2REFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUEwRGYsT0FyREFGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxF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dGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTQpO1xuIiwiZXhwb3J0IGNvbnN0IFJVTk5JTkcgPSBTeW1ib2woJ3J1bm5pbmcnKVxuZXhwb3J0IGNvbnN0IFNVQ0NFU1MgPSB0cnVlXG5leHBvcnQgY29uc3QgRkFJTFVSRSA9IGZhbHNlXG4iLCJpbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlY29yYXRvciBleHRlbmRzIE5vZGUge1xuICBub2RlVHlwZSA9ICdEZWNvcmF0b3InXG5cbiAgY29uc3RydWN0b3IgKHsgY29uZmlnID0ge30sIC4uLnByb3BzIH0gPSB7fSkge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc2V0Q29uZmlnKGNvbmZpZylcbiAgfVxuXG4gIGRlY29yYXRlIChydW4pIHtcbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGRlbiB0byBtYWtlIGl0IHVzZWZ1bFxuICAgIHJldHVybiBydW4oKVxuICB9XG5cbiAgcnVuIChibGFja2JvYXJkLCB7IHJ1bkRhdGEsIHJlZ2lzdHJ5TG9va1VwID0geCA9PiB4LCAuLi5jb25maWcgfSA9IHt9KSB7XG4gICAgY29uc3Qgc3ViUnVuRGF0YSA9IHJ1bkRhdGEgPyBbXSA6IG51bGxcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRlY29yYXRlKCgpID0+IChcbiAgICAgIHJlZ2lzdHJ5TG9va1VwKHRoaXMuYmx1ZXByaW50Lm5vZGUpLnJ1bihibGFja2JvYXJkLCB7IC4uLmNvbmZpZywgcmVnaXN0cnlMb29rVXAsIHJ1bkRhdGE6IHN1YlJ1bkRhdGEgfSlcbiAgICApLCBibGFja2JvYXJkLCB0aGlzLmNvbmZpZylcblxuICAgIGlmIChydW5EYXRhKSB7XG4gICAgICBydW5EYXRhLnB1c2goe1xuICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIHR5cGU6IHRoaXMubm9kZVR5cGUsXG4gICAgICAgIG5vZGVzOiBzdWJSdW5EYXRhLFxuICAgICAgICByZXN1bHRcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIHNldENvbmZpZyAoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IFRhc2sgZnJvbSAnLi9UYXNrJ1xuXG5sZXQgcmVnaXN0cnkgPSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVnaXN0cnkgKCkge1xuICByZXR1cm4gcmVnaXN0cnlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdHJ5TG9va1VwIChub2RlKSB7XG4gIGlmICh0eXBlb2Ygbm9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBsb29rZWRVcE5vZGUgPSByZWdpc3RyeVtub2RlXVxuICAgIGlmICghbG9va2VkVXBOb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG5vZGUgd2l0aCBuYW1lICR7bm9kZX0gcmVnaXN0ZXJlZC5gKVxuICAgIH1cbiAgICByZXR1cm4gbG9va2VkVXBOb2RlXG4gIH1cbiAgcmV0dXJuIG5vZGVcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmVoYXZpb3JUcmVlIHtcbiAgY29uc3RydWN0b3IgKHsgdHJlZSwgYmxhY2tib2FyZCB9KSB7XG4gICAgdGhpcy50cmVlID0gdHJlZVxuICAgIHRoaXMuYmxhY2tib2FyZCA9IGJsYWNrYm9hcmRcbiAgICB0aGlzLmxhc3RSZXN1bHQgPSBudWxsXG4gIH1cblxuICBzdGVwICh7IGRlYnVnID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgY29uc3QgaW5kZXhlcyA9IHRoaXMubGFzdFJlc3VsdCAmJiB0eXBlb2YgdGhpcy5sYXN0UmVzdWx0ID09PSAnb2JqZWN0JyA/IHRoaXMubGFzdFJlc3VsdCA6IFtdXG4gICAgY29uc3QgcmVydW4gPSB0aGlzLmxhc3RSZXN1bHQgPT09IFJVTk5JTkcgfHwgaW5kZXhlcy5sZW5ndGggPiAwXG4gICAgY29uc3QgcnVuRGF0YSA9IGRlYnVnID8gW10gOiBudWxsXG4gICAgdGhpcy5sYXN0UmVzdWx0ID0gcmVnaXN0cnlMb29rVXAodGhpcy50cmVlKS5ydW4odGhpcy5ibGFja2JvYXJkLCB7IGluZGV4ZXMsIHJlcnVuLCByZWdpc3RyeUxvb2tVcCwgcnVuRGF0YSB9KVxuICAgIHRoaXMubGFzdFJ1bkRhdGEgPSBydW5EYXRhXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIgKG5hbWUsIG5vZGUpIHtcbiAgICByZWdpc3RyeVtuYW1lXSA9IHR5cGVvZiBub2RlID09PSAnZnVuY3Rpb24nXG4gICAgICA/IG5ldyBUYXNrKHsgbmFtZSwgcnVuOiBub2RlIH0pXG4gICAgICA6IG5vZGVcbiAgfVxuXG4gIHN0YXRpYyBjbGVhblJlZ2lzdHJ5ICgpIHtcbiAgICByZWdpc3RyeSA9IHt9XG4gIH1cbn1cbiIsImltcG9ydCB7IFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcblxuY29uc3QgTk9PUCA9ICgpID0+IHt9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGUge1xuICBub2RlVHlwZSA9ICdOb2RlJ1xuXG4gIGNvbnN0cnVjdG9yICh7IHJ1biA9IE5PT1AsIHN0YXJ0ID0gTk9PUCwgZW5kID0gTk9PUCwgLi4ucHJvcHMgfSkge1xuICAgIHRoaXMuYmx1ZXByaW50ID0geyBydW4sIHN0YXJ0LCBlbmQsIC4uLnByb3BzIH1cbiAgfVxuXG4gIHJ1biAoYmxhY2tib2FyZCwgeyByZXJ1biA9IGZhbHNlLCBydW5EYXRhLCByZWdpc3RyeUxvb2tVcCA9IHggPT4geCwgLi4uY29uZmlnIH0gPSB7fSkge1xuICAgIGlmICghcmVydW4pIHRoaXMuYmx1ZXByaW50LnN0YXJ0KGJsYWNrYm9hcmQpXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5ibHVlcHJpbnQucnVuKGJsYWNrYm9hcmQsIHsgLi4uY29uZmlnLCByZXJ1biwgcnVuRGF0YSwgcmVnaXN0cnlMb29rVXAgfSlcbiAgICBpZiAocmVzdWx0ICE9PSBSVU5OSU5HKSB7XG4gICAgICB0aGlzLmJsdWVwcmludC5lbmQoYmxhY2tib2FyZClcbiAgICB9XG4gICAgaWYgKHJ1bkRhdGEpIHtcbiAgICAgIHJ1bkRhdGEucHVzaCh7XG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgdHlwZTogdGhpcy5ub2RlVHlwZSxcbiAgICAgICAgcmVzdWx0XG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBjb2xsZWN0RGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIHR5cGU6IHRoaXMubm9kZVR5cGVcbiAgICB9XG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWUgfHwgdGhpcy5ibHVlcHJpbnQubmFtZVxuICB9XG5cbiAgc2V0IG5hbWUgKG5hbWUpIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZVxuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYW5jaE5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgbm9kZVR5cGUgPSAnQnJhbmNoTm9kZSdcblxuICBjb25zdHJ1Y3RvciAoYmx1ZXByaW50KSB7XG4gICAgc3VwZXIoYmx1ZXByaW50KVxuXG4gICAgdGhpcy5udW1Ob2RlcyA9IGJsdWVwcmludC5ub2Rlcy5sZW5ndGhcbiAgfVxuXG4gIHJ1biAoYmxhY2tib2FyZCA9IG51bGwsIHsgaW5kZXhlcyA9IFtdLCByZXJ1biwgcnVuRGF0YSwgcmVnaXN0cnlMb29rVXAgPSB4ID0+IHggfSA9IHt9KSB7XG4gICAgY29uc3Qgc3ViUnVuRGF0YSA9IHJ1bkRhdGEgPyBbXSA6IG51bGxcbiAgICB0aGlzLmJsdWVwcmludC5zdGFydChibGFja2JvYXJkKVxuICAgIGxldCBvdmVyYWxsUmVzdWx0ID0gdGhpcy5TVEFSVF9DQVNFXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IGluZGV4ZXMuc2hpZnQoKSB8fCAwXG4gICAgd2hpbGUgKGN1cnJlbnRJbmRleCA8IHRoaXMubnVtTm9kZXMpIHtcbiAgICAgIGxldCBub2RlID0gcmVnaXN0cnlMb29rVXAodGhpcy5ibHVlcHJpbnQubm9kZXNbY3VycmVudEluZGV4XSlcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vZGUucnVuKGJsYWNrYm9hcmQsIHsgaW5kZXhlcywgcmVydW4sIHJ1bkRhdGE6IHN1YlJ1bkRhdGEsIHJlZ2lzdHJ5TG9va1VwIH0pXG4gICAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSB7XG4gICAgICAgIHJldHVybiBbIGN1cnJlbnRJbmRleCwgLi4uaW5kZXhlcyBdXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnKSB7IC8vIGFycmF5XG4gICAgICAgIHJldHVybiBbIC4uLmluZGV4ZXMsIGN1cnJlbnRJbmRleCwgLi4ucmVzdWx0IF1cbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSB0aGlzLk9QVF9PVVRfQ0FTRSkge1xuICAgICAgICBvdmVyYWxsUmVzdWx0ID0gcmVzdWx0XG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICArK2N1cnJlbnRJbmRleFxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmJsdWVwcmludC5lbmQoYmxhY2tib2FyZClcbiAgICBpZiAocnVuRGF0YSkge1xuICAgICAgKytjdXJyZW50SW5kZXhcbiAgICAgIC8vIGNvbGxlY3QgZGF0YSBvZiB1bmZpbmlzaGVkIG5vZGVzXG4gICAgICB3aGlsZSAoY3VycmVudEluZGV4IDwgdGhpcy5udW1Ob2Rlcykge1xuICAgICAgICBzdWJSdW5EYXRhLnB1c2gocmVnaXN0cnlMb29rVXAodGhpcy5ibHVlcHJpbnQubm9kZXNbY3VycmVudEluZGV4XSkuY29sbGVjdERhdGEoKSlcbiAgICAgICAgKytjdXJyZW50SW5kZXhcbiAgICAgIH1cbiAgICAgIHJ1bkRhdGEucHVzaCh7XG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgdHlwZTogdGhpcy5ub2RlVHlwZSxcbiAgICAgICAgbm9kZXM6IHN1YlJ1bkRhdGEsXG4gICAgICAgIHJlc3VsdDogb3ZlcmFsbFJlc3VsdFxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG92ZXJhbGxSZXN1bHRcbiAgfVxuXG4gIGdldCBjb2xsZWN0RGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIHR5cGU6IHRoaXMubm9kZVR5cGUsXG4gICAgICBub2RlczogdGhpcy5ub2Rlcy5tYXAobm9kZSA9PiBub2RlLmNvbGxlY3REYXRhKCkpXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2sgZXh0ZW5kcyBOb2RlIHtcbiAgbm9kZVR5cGUgPSAnVGFzaydcbn1cbiIsImltcG9ydCB7IFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCBCcmFuY2hOb2RlIGZyb20gJy4vQnJhbmNoTm9kZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZG9tIGV4dGVuZHMgQnJhbmNoTm9kZSB7XG4gIG5vZGVUeXBlID0gJ1JhbmRvbSdcblxuICBydW4gKGJsYWNrYm9hcmQgPSBudWxsLCB7IGluZGV4ZXMgPSBbXSwgcmVydW4sIHJlZ2lzdHJ5TG9va1VwID0geCA9PiB4IH0gPSB7fSkge1xuICAgIHRoaXMuYmx1ZXByaW50LnN0YXJ0KGJsYWNrYm9hcmQpXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IGluZGV4ZXMuc2hpZnQoKSB8fCAwXG4gICAgaWYgKCFyZXJ1bikge1xuICAgICAgY3VycmVudEluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5udW1Ob2RlcylcbiAgICB9XG4gICAgY29uc3Qgbm9kZSA9IHJlZ2lzdHJ5TG9va1VwKHRoaXMuYmx1ZXByaW50Lm5vZGVzW2N1cnJlbnRJbmRleF0pXG4gICAgY29uc3QgcmVzdWx0ID0gbm9kZS5ydW4oYmxhY2tib2FyZCwgeyBpbmRleGVzLCByZXJ1biwgcmVnaXN0cnlMb29rVXAgfSlcbiAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSB7XG4gICAgICByZXR1cm4gWyBjdXJyZW50SW5kZXgsIC4uLmluZGV4ZXMgXVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcpIHsgLy8gYXJyYXlcbiAgICAgIHJldHVybiBbIC4uLmluZGV4ZXMsIGN1cnJlbnRJbmRleCwgLi4ucmVzdWx0IF1cbiAgICB9XG4gICAgdGhpcy5ibHVlcHJpbnQuZW5kKGJsYWNrYm9hcmQpXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG4iLCJpbXBvcnQgeyBTVUNDRVNTLCBGQUlMVVJFIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgQnJhbmNoTm9kZSBmcm9tICcuL0JyYW5jaE5vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGVjdG9yIGV4dGVuZHMgQnJhbmNoTm9kZSB7XG4gIG5vZGVUeXBlID0gJ1NlbGVjdG9yJ1xuICBTVEFSVF9DQVNFID0gRkFJTFVSRVxuICBPUFRfT1VUX0NBU0UgPSBTVUNDRVNTXG59XG4iLCJpbXBvcnQgeyBTVUNDRVNTLCBGQUlMVVJFIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgQnJhbmNoTm9kZSBmcm9tICcuL0JyYW5jaE5vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlcXVlbmNlIGV4dGVuZHMgQnJhbmNoTm9kZSB7XG4gIG5vZGVUeXBlID0gJ1NlcXVlbmNlJ1xuICBTVEFSVF9DQVNFID0gU1VDQ0VTU1xuICBPUFRfT1VUX0NBU0UgPSBGQUlMVVJFXG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HLCBGQUlMVVJFIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsd2F5c0ZhaWxEZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdBbHdheXNGYWlsRGVjb3JhdG9yJ1xuXG4gIGRlY29yYXRlIChydW4pIHtcbiAgICBjb25zdCByZXN1bHQgPSBydW4oKVxuICAgIGlmIChyZXN1bHQgPT09IFJVTk5JTkcpIHJldHVybiBSVU5OSU5HXG4gICAgcmV0dXJuIEZBSUxVUkVcbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORywgU1VDQ0VTUyB9IGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi4vRGVjb3JhdG9yJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbHdheXNTdWNjZWVkRGVjb3JhdG9yIGV4dGVuZHMgRGVjb3JhdG9yIHtcbiAgbm9kZVR5cGUgPSAnQWx3YXlzU3VjY2VlZERlY29yYXRvcidcblxuICBkZWNvcmF0ZSAocnVuKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gcnVuKClcbiAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSByZXR1cm4gUlVOTklOR1xuICAgIHJldHVybiBTVUNDRVNTXG4gIH1cbn1cbiIsImltcG9ydCB7IEZBSUxVUkUgfSBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4uL0RlY29yYXRvcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29vbGRvd25EZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdDb29sZG93bkRlY29yYXRvcidcblxuICBzZXRDb25maWcgKHsgY29vbGRvd24gPSA1IH0pIHtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGNvb2xkb3duXG4gICAgfVxuICB9XG5cbiAgZGVjb3JhdGUgKHJ1bikge1xuICAgIGlmICh0aGlzLmxvY2spIHtcbiAgICAgIHJldHVybiBGQUlMVVJFXG4gICAgfVxuICAgIHRoaXMubG9jayA9IHRydWVcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubG9jayA9IGZhbHNlXG4gICAgfSwgdGhpcy5jb25maWcuY29vbGRvd24gKiAxMDAwKVxuICAgIHJldHVybiBydW4oKVxuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HLCBTVUNDRVNTLCBGQUlMVVJFIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmVydERlY29yYXRvciBleHRlbmRzIERlY29yYXRvciB7XG4gIG5vZGVUeXBlID0gJ0ludmVydERlY29yYXRvcidcblxuICBkZWNvcmF0ZSAocnVuKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gcnVuKClcbiAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSByZXR1cm4gUlVOTklOR1xuICAgIHJldHVybiByZXN1bHQgPT09IFNVQ0NFU1MgPyBGQUlMVVJFIDogU1VDQ0VTU1xuICB9XG59XG4iLCJpbXBvcnQgeyBGQUlMVVJFIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvb3BEZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdMb29wRGVjb3JhdG9yJ1xuXG4gIHNldENvbmZpZyAoeyBsb29wID0gSW5maW5pdHkgfSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgbG9vcFxuICAgIH1cbiAgfVxuXG4gIGRlY29yYXRlIChydW4pIHtcbiAgICBsZXQgaSA9IDBcbiAgICBsZXQgcmVzdWx0ID0gRkFJTFVSRVxuICAgIHdoaWxlIChpKysgPCB0aGlzLmNvbmZpZy5sb29wKSB7XG4gICAgICByZXN1bHQgPSBydW4oKVxuICAgICAgaWYgKHJlc3VsdCA9PT0gRkFJTFVSRSkgcmV0dXJuIEZBSUxVUkVcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG4iLCJjb25zdCBCZWhhdmlvclRyZWUgPSByZXF1aXJlKCcuL0JlaGF2aW9yVHJlZScpLmRlZmF1bHRcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIEJlaGF2aW9yVHJlZSxcbiAgZ2V0UmVnaXN0cnk6IHJlcXVpcmUoJy4vQmVoYXZpb3JUcmVlJykuZ2V0UmVnaXN0cnksXG4gIHJlZ2lzdHJ5TG9va1VwOiByZXF1aXJlKCcuL0JlaGF2aW9yVHJlZScpLnJlZ2lzdHJ5TG9va1VwLFxuXG4gIEJlaGF2aW9yVHJlZUltcG9ydGVyOiByZXF1aXJlKCcuL0JlaGF2aW9yVHJlZUltcG9ydGVyJykuZGVmYXVsdCxcblxuICBCcmFuY2hOb2RlOiByZXF1aXJlKCcuL0JyYW5jaE5vZGUnKS5kZWZhdWx0LFxuICBOb2RlOiByZXF1aXJlKCcuL05vZGUnKS5kZWZhdWx0LFxuICBTZWxlY3RvcjogcmVxdWlyZSgnLi9TZWxlY3RvcicpLmRlZmF1bHQsXG4gIFNlcXVlbmNlOiByZXF1aXJlKCcuL1NlcXVlbmNlJykuZGVmYXVsdCxcbiAgUmFuZG9tOiByZXF1aXJlKCcuL1JhbmRvbScpLmRlZmF1bHQsXG4gIERlY29yYXRvcjogcmVxdWlyZSgnLi9EZWNvcmF0b3InKS5kZWZhdWx0LFxuICBUYXNrOiByZXF1aXJlKCcuL1Rhc2snKS5kZWZhdWx0LFxuXG4gIGRlY29yYXRvcnM6IHsuLi5yZXF1aXJlKCcuL2RlY29yYXRvcnMnKX0sXG5cbiAgLi4ucmVxdWlyZSgnLi9jb25zdGFudHMnKVxufVxuIiwiaW1wb3J0IERlY29yYXRvciBmcm9tICcuL0RlY29yYXRvcidcbmltcG9ydCBSYW5kb20gZnJvbSAnLi9SYW5kb20nXG5pbXBvcnQgU2VsZWN0b3IgZnJvbSAnLi9TZWxlY3RvcidcbmltcG9ydCBTZXF1ZW5jZSBmcm9tICcuL1NlcXVlbmNlJ1xuaW1wb3J0IFRhc2sgZnJvbSAnLi9UYXNrJ1xuaW1wb3J0IEFsd2F5c0ZhaWxEZWNvcmF0b3IgZnJvbSAnLi9kZWNvcmF0b3JzL0Fsd2F5c0ZhaWxEZWNvcmF0b3InXG5pbXBvcnQgQWx3YXlzU3VjY2VlZERlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvQWx3YXlzU3VjY2VlZERlY29yYXRvcidcbmltcG9ydCBDb29sZG93bkRlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvQ29vbGRvd25EZWNvcmF0b3InXG5pbXBvcnQgSW52ZXJ0RGVjb3JhdG9yIGZyb20gJy4vZGVjb3JhdG9ycy9JbnZlcnREZWNvcmF0b3InXG5pbXBvcnQgTG9vcERlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvTG9vcERlY29yYXRvcidcbmltcG9ydCB7IHJlZ2lzdHJ5TG9va1VwIH0gZnJvbSAnLi9CZWhhdmlvclRyZWUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJlaGF2aW9yVHJlZUltcG9ydGVyIHtcbiAgdHlwZXMgPSB7XG4gICAgdGFzazogVGFzayxcbiAgICBkZWNvcmF0b3I6IERlY29yYXRvcixcbiAgICBzZWxlY3RvcjogU2VsZWN0b3IsXG4gICAgc2VxdWVuY2U6IFNlcXVlbmNlLFxuICAgIHJhbmRvbTogUmFuZG9tLFxuICAgIGludmVydDogSW52ZXJ0RGVjb3JhdG9yLFxuICAgIGZhaWw6IEFsd2F5c0ZhaWxEZWNvcmF0b3IsXG4gICAgc3VjY2VlZDogQWx3YXlzU3VjY2VlZERlY29yYXRvcixcbiAgICBjb29sZG93bjogQ29vbGRvd25EZWNvcmF0b3IsXG4gICAgbG9vcDogTG9vcERlY29yYXRvclxuICB9XG5cbiAgZGVmaW5lVHlwZSAodHlwZSwgS2xhc3MpIHtcbiAgICB0aGlzLnR5cGVzW3R5cGVdID0gS2xhc3NcbiAgfVxuXG4gIHBhcnNlIChqc29uKSB7XG4gICAgY29uc3QgeyB0eXBlLCBuYW1lLCBub2RlLCBub2RlcywgLi4uY29uZmlnIH0gPSBqc29uXG4gICAgY29uc3QgS2xhc3MgPSB0aGlzLnR5cGVzW3R5cGVdXG4gICAgaWYgKCFLbGFzcykge1xuICAgICAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSByZWdpc3RyeUxvb2tVcCh0eXBlKVxuICAgICAgaWYgKHJlZ2lzdGVyZWROb2RlKSB7XG4gICAgICAgIHJlZ2lzdGVyZWROb2RlLm5hbWUgPSBuYW1lXG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkTm9kZVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb24ndCBrbm93IGhvdyB0byBoYW5kbGUgdHlwZSAke3R5cGV9LiBQbGVhc2UgcmVnaXN0ZXIgdGhpcyBmaXJzdC5gKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgS2xhc3Moe1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIG5vZGU6IG5vZGUgPyB0aGlzLnBhcnNlKG5vZGUpIDogbnVsbCxcbiAgICAgIG5vZGVzOiBub2RlcyA/IG5vZGVzLm1hcChzdWJKc29uID0+IHRoaXMucGFyc2Uoc3ViSnNvbikpIDogbnVsbCxcbiAgICAgIGNvbmZpZ1xuICAgIH0pXG4gIH1cbn1cbiIsImV4cG9ydCBBbHdheXNGYWlsRGVjb3JhdG9yIGZyb20gJy4vQWx3YXlzRmFpbERlY29yYXRvcidcbmV4cG9ydCBBbHdheXNTdWNjZWVkRGVjb3JhdG9yIGZyb20gJy4vQWx3YXlzU3VjY2VlZERlY29yYXRvcidcbmV4cG9ydCBDb29sZG93bkRlY29yYXRvciBmcm9tICcuL0Nvb2xkb3duRGVjb3JhdG9yJ1xuZXhwb3J0IEludmVydERlY29yYXRvciBmcm9tICcuL0ludmVydERlY29yYXRvcidcbmV4cG9ydCBMb29wRGVjb3JhdG9yIGZyb20gJy4vTG9vcERlY29yYXRvcidcbiJdLCJzb3VyY2VSb290IjoiIn0=